name: Chromium Repack Fast

on:
  workflow_dispatch:

jobs:
  repack:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Install tools
      run: |
        sudo apt update
        sudo apt install -y zip unzip apksigner wget

    - name: Download prebuilt Chromium
      run: |
        wget -O chromium.apk "https://example.com/chromium-prebuilt.apk"
        unzip chromium.apk -d base

    - name: Apply mods
      run: |
        # Chỗ này đặt patch tùy ý
        sed -i 's/useHardwareAcceleration="true"/useHardwareAcceleration="false"/g' base/AndroidManifest.xml || true

    - name: Repack
      run: |
        cd base
        zip -r ../chromium-mod.apk .

    - name: Sign APK
      run: |
        keytool -genkey -v -keystore key.jks -storepass 123456 -keypass 123456 -alias key -keyalg RSA -keysize 2048 -validity 10000
        apksigner sign --ks key.jks --ks-pass pass:123456 chromium-mod.apk

    - name: Upload Artifact
      uses: actions/upload-artifact@v4
      with:
        name: chromium-mod-fast
        path: chromium-mod.apk    - name: Upload
      uses: actions/upload-artifact@v3
      with:
        name: chromium-mod-fast
        path: chromium-mod.apk
